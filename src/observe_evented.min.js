/*! Observe_evented 0.2.1 */
!function(a){var b={additionalEventTypes:[],multipleObservers:!1,output:{batchOnly:!1,dropValues:!1,minimalEvents:!1,noUpdateEvents:!1},shim:null},c=[],d=["add","update","delete","reconfigure","setPrototype"],e=function(a,b){for(var c=a,d=0;d<b.length;d++)c=f[b[d]](c);return c},f={computeEvents:function(a){for(var b=[],c=a[0].object,d=0;d<a.length;d++){var e=a[d];if("splice"!==e.type){var f=l.extend({},e),g=c.constructor===Array;g&&(f.name=parseInt(f.name)),"delete"===f.type&&(g?(f.type="update",f.value=null):f.type="remove"),b.push(f)}else{for(var h=0;h<e.removed.length;h++){var i=e.index,f={name:i,object:c,oldValue:e.removed[h]||null,type:"remove"};b.push(f)}for(var h=0;h<e.addedCount;h++){var i=e.index+h,f={name:i,object:c,type:"add"};b.push(f)}}}return b},findValues:function(a){for(var b=l.merge([],a),c=a[0].object,d=0;d<b.length;d++){var e=b[d];if(("add"===e.type||"update"===e.type)&&void 0===e.value)if(e.object.constructor===Array){for(var f=e.name,g=d+1;g<b.length;g++){var h=b[g];if(f>h.name)"add"===h.type?f++:"remove"===h.type&&f--;else if(f===h.name)if("add"===h.type)f++;else if("update"===h.type||"remove"===h.type){e.value=h.oldValue;break}}void 0===e.value&&(e.value=c[f])}else{for(var g=d+1;g<b.length;g++){var h=b[g];if(e.name===h.name&&("update"===h.type||"remove"===h.type)){e.value=h.oldValue;break}}void 0===e.value&&(e.value=c[e.name])}}return b},minimalEvents:function(a){var b,c=a[0].object.constructor===Array;if(c){b=[];for(var d=0;d<a.length;d++){var e=a[d],f=null;if("add"!==e.type)for(var g=0;g<b.length;g++)if(e.name===b[g][0][b[g][0].length-1]){f=g;break}if(null===f&&(f=b.length,b.push([[],[]])),"add"===e.type||"remove"===e.type)for(var g=0;g<b.length;g++)if(b[g][0].length){var h=b[g][0][b[g][0].length-1];e.name<h?b[g][0].push("add"===e.type?h+1:h-1):e.name===h&&"add"===e.type&&b[g][0].push(h+1)}"add"===e.type||0===b[f][0].length?b[f][0].push(e.name):"remove"===e.type&&b[f][0].push(-1),b[f][1].push(d)}b=l.map(b,function(a){return a[0]=a[0].pop(),[a]})}else{b={};for(var d=0;d<a.length;d++)b[a[d].name]||(b[a[d].name]=[]),b[a[d].name].push(d);b=l.map(b,function(a,b){return[[b,a]]})}for(var i=[],d=0;d<b.length;d++){var j=b[d][0],k=b[d][1],m=a[k[k.length-1]];if("remove"===m.type){if(k.length>1)if("add"===a[k[0]].type)for(var g=0;g<k.length;g++)i.push(k[g]);else for(var g=0;g<k.length-1;g++)i.push(k[g])}else{c?a[k[0]].name=j:"remove"===a[k[0]].type&&(a[k[0]].type="update"),m.value&&(a[k[0]].value=m.value);for(var g=1;g<k.length;g++)i.push(k[g])}}var n=l.grep(a,function(a,b){return-1===l.inArray(b,i)});return c&&n.sort(function(a,b){return a.name>b.name}),n},noUpdateEvents:function(a){for(var b=[],c=a[0].object,d=0;d<a.length;d++){var e=a[d];"update"===e.type?(b.push({object:c,name:e.name,oldValue:e.oldValue,type:"remove"},{object:c,name:e.name,type:"add"}),void 0!==e.value&&(b[b.length-1].value=e.value)):b.push(e)}return b}},g=function(a){b=l.extend(b,a)},h=function(a){this.objectData=a},i=function(a){for(var b=[],d=0;d<c.length;d++)a===c[d].object&&b.push(c[d]);return b},j=function(a,d,e){d?"function"==typeof d&&(e=d,d={}):d={};var f,g,j=i(a);if(0===j.length||d.multipleObservers?(f={callbacks:[],emitter:null,isArray:a.constructor===Array,object:a,observer:null,options:{}},f.emitter=new h(f),c.push(f)):(f=j[0],g=f.options.additionalEventTypes),f.options=l.extend({},b),l.extend(f.options,d),e&&f.emitter.on(null,e),f.observer){var k=!1,m=f.options.additionalEventTypes;m.length!==g.length?k=!0:(diff=[],l.grep(m,function(a){-1==l.inArray(a,g)&&diff.push(a)}),diff.length>0&&(k=!0)),k&&f.emitter.disable()}var n=f.isArray?Array:Object;if(!n.observe){var o=f.isArray?"Array":"Object";if(!f.options.shim||!f.options.shim[o].observe)throw new TypeError("This environment does not support "+o+".observe");n=f.options.shim[o]}return f.primitive=n,f.observer||f.emitter.enable(),f.emitter},k=function(a,b){var c=a.callbacks,d=["computeEvents"];a.options.output.dropValues||d.push("findValues"),a.options.output.minimalEvents&&d.push("minimalEvents"),a.options.output.noUpdateEvents&&d.push("noUpdateEvents");var f=e(b,d),g=[{object:a.object,type:"batch",value:{raw:b,computed:f}}];a.options.output.batchOnly||l.merge(g,f);for(var h=0;h<g.length;h++)for(var i=0;i<c.length;i++)(null===c[i].nameFilter||-1!==l.inArray(g[h].name,c[i].nameFilter))&&(null===c[i].eventTypes||-1!==l.inArray(g[h].type,c[i].eventTypes))&&c[i].callback.call(a.object,g[h])};h.prototype.on=function(a,b,c){if(void 0===b?b=null:"function"==typeof b&&(c=b,b=null),b&&"string"==typeof b&&(b=[b]),!c)throw new TypeError("Missing callback parameter");a&&(a=a.split(" "));for(var d=-1,e=0;e<this.objectData.callbacks.length;e++)if(c===this.objectData.callbacks[e].callback){d=e;break}if(-1!==d)if(null===a)this.objectData.callbacks[e].eventTypes=null;else for(var f=0;f<a.length;f++)-1===l.inArray(a[f],this.objectData.callbacks[e].eventTypes)&&this.objectData.callbacks[e].eventTypes.push(a[f]);else this.objectData.callbacks.push({callback:c,eventTypes:a,nameFilter:b});return this},h.prototype.off=function(a,b){a&&"function"==typeof a&&(b=a,a=null),a&&(a=a.split(" "));for(var c=this.objectData.callbacks,d=[],e=0;e<c.length;e++)b&&b!==c[e].callback||(a&&(c[e].eventTypes=l.grep(c[e].eventTypes,function(b){return-1===l.inArray(b,a)})),(!a||c[e].eventTypes&&0===c[e].eventTypes.length)&&d.push(e));return this.objectData.callbacks=l.grep(c,function(a,b){return-1===l.inArray(b,d)}),this},h.prototype.enable=function(){var a=this;if(!this.objectData.observer){var b=void 0,c=this.objectData.options.additionalEventTypes;if(!this.objectData.isArray&&c){b=l.merge([],d);for(var e=0;e<c.length;e++)-1===l.inArray(c[e],b)&&b.push(c[e])}var f=function(b){return k(a.objectData,b)};this.objectData.primitive.observe(this.objectData.object,f,b),this.objectData.observer=f}},h.prototype.disable=function(){this.objectData.primitive.deliverChangeRecords(this.objectData.observer),this.objectData.primitive.unobserve(this.objectData.object,this.objectData.observer),this.objectData.observer=null},h.prototype.destroy=function(a){var b=this,d=function(){b.off(),c.splice(l.inArray(this.objectData,c),1)};a?setTimeout(d,0):(this.deliverChangeRecords(),d()),this.disable()},h.prototype.deliverChangeRecords=function(){this.objectData.primitive.deliverChangeRecords(this.objectData.observer)};/*! jQuery utils */
var l={extend:function n(a,b){a=a||{};for(var c in b)a[c]="object"==typeof b[c]&&null!==b[c]?n(a[c],b[c]):b[c];return a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},inArray:function(a,b,c){var d=b.length>>>0,c=Number(arguments[2])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=d);d>c;c++)if(c in b&&b[c]===a)return c;return-1},map:function(a,b,c){var d,e=0,f=a.length,g=[];if(a.constructor===Array)for(;f>e;e++)d=b(a[e],e,c),null!=d&&(g[g.length]=d);else for(e in a)d=b(a[e],e,c),null!=d&&(g[g.length]=d);return[].concat.apply([],g)},merge:function(a,b){var c=b.length,d=a.length,e=0;if("number"==typeof c)for(;c>e;e++)a[d++]=b[e];else for(;void 0!==b[e];)a[d++]=b[e++];return a.length=d,a}},m={observe:j,defaultOptions:g};"undefined"!=typeof exports?("undefined"!=typeof modules&&module.exports&&(exports=module.exports=m),exports.observe_evented=m):a.observe_evented=m}(this);