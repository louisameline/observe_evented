/*! Observe_evented 0.1.0 */
!function(a){var b,c,d={batchOnly:!1,dropValues:!1,eventTypes:null,minimalEvents:!1,noArrayUpdate:!1,shim:null},e=[];a.observe&&(b=a.observe),a.unobserve&&(c=a.unobserve);var f=function(b){var c;return a.each(e,function(a,d){return b===d.object?(c=a,!1):void 0}),void 0===c&&(c=e.length,e.push({object:b,observers:[]})),e[c].observers};a.observe=function(b,c,e,g){void 0===c?c=null:"object"!=typeof c||a.isArray(c)?"function"==typeof c&&(g=c,e={},c=null):(g=e||function(){},e=c,c=null),e?"function"==typeof e&&(g=e,e={}):e={};var h=null;null!==c&&(h="string"==typeof c?[c]:c),e=a.extend(!0,{},d,e);var i=function(c){if(a.each(c,function(c,d){if("splice"!==d.type){var f=a.extend(!0,{},d),g=[];l&&(f.name=parseInt(f.name)),"delete"===f.type&&(l?(f.type="update",f.value=null):f.type="remove"),l&&"update"===f.type&&e.noArrayUpdate?g.push({object:b,name:f.name,oldValue:f.oldValue,type:"remove"},{object:b,name:f.name,type:"add"}):g.push(f),Array.prototype.push.apply(j,g)}else{a.each(d.removed,function(a,c){var e=d.index,f={name:e,object:b,oldValue:c||null,type:"remove"};j.push(f)});for(var h=0;h<d.addedCount;h++){var i=d.index+h,f={name:i,object:b,type:"add"};j.push(f)}}}),!e.dropValues)for(var d=0;d<j.length;d++){var f=j[d];if(("add"===f.type||"update"===f.type)&&void 0===f.value)if(l){for(var k=f.name,m=d+1;m<j.length;m++){var n=j[m];if(k>n.name)"add"===n.type?k++:"remove"===n.type&&k--;else if(k===n.name)if("add"===n.type)k++;else if("update"===n.type||"remove"===n.type){f.value=n.oldValue;break}}void 0===f.value&&(f.value=b[k])}else{for(var m=d+1;m<j.length;m++){var n=j[m];if(f.name===n.name&&("update"===n.type||"remove"===n.type)){f.value=n.oldValue;break}}void 0===f.value&&(f.value=b[f.name])}}if(e.minimalEvents){var o;if(l){o=[];for(var d=0;d<j.length;d++){var f=j[d],p=null;"add"!==f.type&&a.each(o,function(a,b){return f.name===b[0][b[0].length-1]?(p=a,!1):void 0}),null===p&&(p=o.length,o.push([[],[]])),("add"===f.type||"remove"===f.type)&&a.each(o,function(a,b){if(b[0].length){var c=b[0][b[0].length-1];f.name<c?b[0].push("add"===f.type?c+1:c-1):f.name===c&&"add"===f.type&&b[0].push(c+1)}}),"add"===f.type||0===o[p][0].length?o[p][0].push(f.name):"remove"===f.type&&o[p][0].push(-1),o[p][1].push(d)}o=a.map(o,function(a){return a[0]=a[0].pop(),[a]})}else o={},a.each(j,function(a,b){o[b.name]||(o[b.name]=[]),o[b.name].push(a)}),o=a.map(o,function(a,b){return[[b,a]]});var q=[];a.each(o,function(b,c){var d=c[0],e=c[1],f=j[e[e.length-1]];if("remove"===f.type){if(e.length>1)if("add"===j[e[0]].type)a.each(e,function(a,b){q.push(b)});else for(var g=0;g<e.length-1;g++)q.push(e[g])}else{for(var g=1;g<e.length;g++)q.push(e[g]);l&&(j[e[0]].name=d)}}),j=a.grep(j,function(b,c){return-1===a.inArray(c,q)}),e.dropValues||a.each(j,function(a,c){("add"===c.type||"update"===c.type)&&(c.value=b[c.name])})}var r=[{object:b,type:"batch",value:j},{object:b,type:"rawBatch",value:c}];e.batchOnly||a.merge(r,j),a.each(r,function(c,d){e.eventTypes&&-1===a.inArray(d.type,e.eventTypes)||(null===h||-1!==a.inArray(d.name,h))&&(g&&g.call(b,d),i.$eventEmitter.trigger(d))})};i.$eventEmitter=a({object:b,name:c}),i.$eventEmitter.unobserve=function(){a.unobserve(b,i)},f(b).push(i);var j=[],k=void 0,l=a.isArray(b),m=l?Array:Object;if(!m.observe){var n=l?"Array":"Object";if(!e.shim||!e.shim[n].observe)throw new TypeError("This environment does not support "+n+".observe");m=e.shim[n]}return!l&&e.eventTypes&&(e.dropValues?(k=e.eventTypes,-1!==a.inArray("remove",k)&&k.push("delete")):(k=a.merge([],e.eventTypes),a.each(["add","update","delete"],function(b,c){-1===a.inArray(c,k)&&k.push(c)}))),m.observe(b,i,k),i.$eventEmitter},a.observe.defaultOptions=function(b){d=a.extend(!0,d,b)},a.observe.noConflict=function(d){d=d||"oe_",a[d+"observe"]=a.observe,a[d+"unobserve"]=a.unobserve,b&&(a.observe=b),c&&(a.observe=b)},a.unobserve=function(b,c){var d,e=f(b),g=a.isArray(b)?Array:Object;d=c?[c]:e,a.each(d,function(c,d){setTimeout(function(){d.$eventEmitter.off()},0),g.unobserve(b,d),e.splice(a.inArray(d,e),1)})}}(jQuery);